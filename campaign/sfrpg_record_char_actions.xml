<?xml version="1.0" encoding="iso-8859-1"?>

<!-- Please see the LICENSE.md file included with this distribution for attribution and copyright information. -->

<root>
	<windowclass name="char_weapon" merge="join">
		<script file="campaign/scripts/sfrpg_char_weapon.lua" />
		<sheetdata>
			<number_charweaponattacktotal name="attack1">
				<script file="campaign/scripts/sfrpg_char_weaponattack.lua" />
			</number_charweaponattacktotal>

			<number_charweaponattacktotal name="attack0">
				<script file="campaign/scripts/sfrpg_char_weaponattack.lua" />
			</number_charweaponattacktotal>
			<number_charweaponsingleattack name="attack">
				<invisible />
				<script file="campaign/scripts/sfrpg_char_weaponattack.lua" />
			</number_charweaponsingleattack>
			
			<basicnumber name="uses">
				<invisible />
			</basicnumber>
			<basicnumber name="current_ammo">
				<anchored to="label_ammo" position="righthigh" width="30" height="20" />
				<font>charstarship-sheetnumber</font>
				<min>0</min>
				<tooltip textres="weapon_tooltip_reloadammo" />
				<script file="common/scripts/number_crosslink_unlink.lua" />
				<script file="campaign/scripts/sfrpg_current_ammo.lua" />
			</basicnumber>
			<state_charammocounter name="ammocounter">
				<anchored to="label_ammo" position="righthigh" offset="33,0" />
				<script file="campaign/scripts/sfrpg_crosslink_ammocounter.lua" />
			</state_charammocounter>	
		</sheetdata>
	</windowclass>

	<windowclass name="char_weapon_reload">
		<frame>recordsheet</frame>
		<placement>
			<size width="400" height="350" />
		</placement>
		<sizelimits>
			<minimum width="400" height="350" />
			<dynamic />
		</sizelimits>
		<nodelete />
		<playercontrol />
		<tooltip control="name" />
		<sheetdata>
			<windowtitlebar name="title">
				<resource>weapon_title</resource>
			</windowtitlebar>
			
			<frame_record_editor name="contentframe" />

			<subwindow_record name="main">
				<class>char_weapon_reload_main</class>
				<activate />
			</subwindow_record>
			<scrollbar_record>
				<target>main</target>
			</scrollbar_record>

			<resize_recordsheet />
			<close_recordsheet />
		</sheetdata>
	</windowclass>

	<windowclass name="char_weapon_reload_main">
		<sheetdata>
			<anchor_column name="columnanchor" />
			<!-- Ammo -->
			<header_column name="header_ammo">
				<insertbefore>header_damage</insertbefore>
				<static textres="weapon_header_ammo" />
				<center />
			</header_column>
			<combobox name="ammopicker">
				<frame>
					<hidereadonly />
				</frame>
				<center />
				<listdirection>down</listdirection>
				<listmaxsize>15</listmaxsize>
				<nodrag />
				<nodrop />
				<noreset />
				<anchored height="20">
					<top parent="columnanchor" anchor="bottom" relation="relative" offset="22" />
					<left offset="5" />
					<right offset="-5" />
				</anchored>
				<default textres="none" />
				<itemsheetname>type</itemsheetname>
				<itemsheetaltname>subtype</itemsheetaltname>
				<script file="campaign/scripts/ammo_ammopicker.lua" />
			</combobox>
			<label_fieldtop name="label_ammopicker">
				<anchored to="ammopicker" />
				<static textres="weapon_label_ammopicker" />
				<readonly />
				<center />
			</label_fieldtop>
		</sheetdata>
	</windowclass>
	
	<windowclass name="char_weapon_editor" merge="join">
		<frame>recordsheet</frame>
		<placement>
			<size width="400" height="388" />
		</placement>
		<sizelimits>
			<minimum width="400" height="388" />
			<dynamic />
		</sizelimits>
	</windowclass>

	<windowclass name="char_weapon_editor_main" merge="join">
		<sheetdata>
			<!-- Ammo -->
			<header_column name="header_ammo">
				<insertbefore>header_damage</insertbefore>
				<static textres="weapon_header_ammo" />
				<center />
			</header_column>
			<label_column name="label_ammopicker_enabled">
				<static textres="char_label_weapon_ammopicker_enabled" />
			</label_column>
			<button_checkbox name="ammopicker_enabled">
				<anchored width="20" height="20">
					<top parent="label_ammopicker_enabled"  />
					<left parent="label_ammopicker_enabled" anchor="right" relation="relative" offset="5" />
				</anchored>
				<default>1</default>
			</button_checkbox>
			<!--
			<combobox name="ammopicker">
				<frame>
					<hidereadonly />
				</frame>
				<center />
				<listdirection>down</listdirection>
				<listmaxsize>15</listmaxsize>
				<nodrag />
				<nodrop />
				<noreset />
				<anchored height="20">
					<top parent="columnanchor" anchor="bottom" relation="relative" offset="22" />
					<left offset="5" />
					<right offset="-5" />
				</anchored>
				<default textres="none" />
				<itemsheetname>type</itemsheetname>
				<itemsheetaltname>subtype</itemsheetaltname>
				<script file="campaign/scripts/ammo_ammopicker.lua" />
			</combobox>
			<label_fieldtop name="label_ammopicker">
				<anchored to="ammopicker" />
				<static textres="weapon_label_ammopicker" />
				<readonly />
				<center />
			</label_fieldtop>
			-->
		</sheetdata>
	</windowclass>
</root>