<?xml version="1.0" encoding="iso-8859-1"?>

<!-- Please see the LICENSE.md file included with this distribution for attribution and copyright information. -->

<root>
	<windowclass name="char_weapon" merge="join">
		<script file="campaign/scripts/ammo_weapon.lua" />
		<sheetdata>
			<number_charweaponfullattack name="attacks">
				<anchored to="attackicons" position="over" />
				<script file="campaign/scripts/ammo_attacks.lua" />
			</number_charweaponfullattack>		
			<number_charweaponattacktotal name="attack1">
				<anchored to="attackframe" position="insidetopleft" offset="3,0" width="27" height="20" />
				<modifier>0</modifier>
				<name>Attack 1</name>
				<source><name>attack1modifier</name><op>+</op></source>
				<script file="campaign/scripts/ammo_attack.lua" />
			</number_charweaponattacktotal>
			<number_charweaponattacktotal name="attack2">
				<anchored to="attack1" position="right" offset="5,0" width="27" />
				<modifier>-5</modifier>
				<name>Attack 2</name>
				<source><name>attack2modifier</name><op>+</op></source>
				<script file="campaign/scripts/ammo_attack.lua" />
			</number_charweaponattacktotal>
			<number_charweaponattacktotal name="attack3">
				<anchored to="attack2" position="right" offset="5,0" width="27" />
				<modifier>-10</modifier>
				<name>Attack 3</name>
				<source><name>attack3modifier</name><op>+</op></source>
				<script file="campaign/scripts/ammo_attack.lua" />
			</number_charweaponattacktotal>
			<number_charweaponattacktotal name="attack4">
				<anchored to="attack3" position="right" offset="5,0" width="27" />
				<modifier>-15</modifier>
				<name>Attack 4</name>
				<source><name>attack4modifier</name><op>+</op></source>
				<script file="campaign/scripts/ammo_attack.lua" />
			</number_charweaponattacktotal>
			
			<!-- Ranged specific fields -->
			<buttonfield name="button_reload">
				<anchored width="27" height="10">
					<top parent="name" anchor="bottom" offset="6" />
					<left offset="2" />
				</anchored>
				<icon normal="button_reload" pressed="button_reload_down" />
				<tooltip textres="weapon_tooltip_reloadammo" />
				<default>0</default>
				<maxammo>maxammo</maxammo>
				<ammo>ammo</ammo>
				<count>count</count>
				<script file="campaign/scripts/ammo_reloadammo.lua" />
			</buttonfield>
			<buttonfield name="isloaded">
				<anchored width="27" height="10">
					<top parent="button_reload" anchor="bottom" offset="1" />
					<left offset="2" />
				</anchored>
				<state icon="button_load" tooltipres="tooltip_actions_unloaded" />
				<state icon="button_unload" tooltipres="tooltip_actions_loaded" />
				<default>0</default>
				<script file="campaign/scripts/ammo_isloaded.lua" />
			</buttonfield>
			<label name="label_range">
				<anchored width="56">
					<left offset="33" />
				</anchored>
			</label>
			<label name="label_ammo">
				<anchored>
					<left offset="125" />
				</anchored>
			</label>
			<basicnumber name="maxammo">
				<script file="common/scripts/number_crosslink.lua" />
			</basicnumber>
		</sheetdata>
	</windowclass>
	
	<windowclass name="char_weapon_editor" merge="join">
		<placement>
			<size width="400" height="388" />
		</placement>
		<sizelimits>
			<minimum width="400" height="388" />
			<dynamic />
		</sizelimits>
	</windowclass>

	<windowclass name="char_weapon_editor_main" merge="join">
		<script file="campaign/scripts/char_weapon_editor_main.lua" />
		<sheetdata>
			<!-- Ammo -->
			<header_column name="header_ammo">
				<insertbefore>header_damage</insertbefore>
				<static textres="weapon_header_ammo" />
				<center />
			</header_column>
			<combobox name="ammopicker">
				<frame>
					<hidereadonly />
				</frame>
				<center />
				<listdirection>up</listdirection>
				<listmaxsize>15</listmaxsize>
				<nodrag />
				<nodrop />
				<noreset />
				<anchored width="160" height="20">
					<top parent="columnanchor" anchor="bottom" relation="relative" offset="22" />
					<left offset="5" />
				</anchored>
				<default textres="none" />
				<itemsheetname>subtype</itemsheetname>
				<itemsheetaltname>type</itemsheetaltname>
				<script file="campaign/scripts/ammo_ammopicker.lua" />
			</combobox>
			<label_fieldtop name="label_ammopicker">
				<anchored to="ammopicker" />
				<static textres="weapon_label_ammopicker" />
				<readonly />
				<center />
			</label_fieldtop>
			<basicnumber name="recoverypercentage">
				<anchored to="ammopicker" width="40" height="20">
					<top anchor="top" offset="0" />
					<left anchor="right" offset="10" />
				</anchored>
				<default>50</default>
				<tabtarget prev="ammopicker" next="missedshots" />
			</basicnumber>
			<label_fieldtop name="label_recoverypercentage">
				<anchored to="recoverypercentage" />
				<readonly />
				<center />
			</label_fieldtop>
			<label name="label_ammopercentof">
				<anchored to="recoverypercentage" position="righthigh" offset="5,0" width="35" />
				<static>% of </static>
				<center />
			</label>
			<basicnumber name="missedshots">
				<anchored to="label_ammopercentof" position="righthigh" offset="5,0" width="40" height="20" />
				<default>0</default>
				<hideonvalue>0</hideonvalue>
				<script file="common/scripts/number_crosslink.lua" />
			</basicnumber>
			<label_fieldtop name="label_missedshots">
				<anchored to="missedshots" />
				<static textres="weapon_label_missedshots" />
				<readonly />
				<center />
			</label_fieldtop>
			<buttoncontrol name="recoverammo">
				<anchored to="missedshots" position="right" offset="7" width="20" />
				<icon normal="button_add" pressed="button_add_down" />
				<tooltip textres="weapon_tooltip_recoverammo" />
				<script file="campaign/scripts/ammo_recover.lua" />
			</buttoncontrol>
		</sheetdata>
	</windowclass>
</root>
